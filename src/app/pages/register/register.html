<div class="min-vh-100 d-flex align-items-center justify-content-center px-3 py-5">
  <div style="max-width: 640px; width: 100%;">
    <div class="text-center mb-5">
      <h1 class="h2 fw-bold text-dark mb-2">Kenz</h1>
      <p class="text-secondary">Créez votre compte</p>
    </div>

    <div class="bg-white rounded-3 shadow-sm p-5">
      <div class="mb-5">
        <div class="d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center gap-3" style="flex: 1;">
            <div
              class="rounded-circle d-flex align-items-center justify-content-center text-white fw-500"
              [style.width]="'32px'"
              [style.height]="'32px'"
              [style.backgroundColor]="currentStep === 1 ? '#2563EB' : '#e5e7eb'"
              [style.color]="currentStep === 1 ? 'white' : '#6b7280'"
            >
              1
            </div>
            <span class="small fw-500" [class.text-primary]="currentStep === 1" [class.text-secondary]="currentStep !== 1">
              Informations de base
            </span>
          </div>
          <div class="flex-grow-1 mx-2" style="height: 2px; background-color: #e5e7eb;"></div>
          <div class="d-flex align-items-center gap-3" style="flex: 1; justify-content: flex-end;">
            <div
              class="rounded-circle d-flex align-items-center justify-content-center text-white fw-500"
              [style.width]="'32px'"
              [style.height]="'32px'"
              [style.backgroundColor]="currentStep === 2 ? '#2563EB' : '#e5e7eb'"
              [style.color]="currentStep === 2 ? 'white' : '#6b7280'"
            >
              2
            </div>
            <span class="small fw-500" [class.text-primary]="currentStep === 2" [class.text-secondary]="currentStep !== 2">
              Informations supplémentaires
            </span>
          </div>
        </div>
        <p class="text-center text-secondary small mt-3 mb-0">Étape {{ currentStep }} sur 2</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div *ngIf="currentStep === 1">
          <div class="row g-3 mb-4">
            <div class="col-12 col-md-6">
              <label for="lastName" class="form-label fw-500">Nom <span class="text-danger">*</span></label>
              <div class="input-group">
                <span class="input-group-text border-0 bg-light">
                  <lucide-icon [img]="UserIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
                </span>
                <input
                  id="lastName"
                  type="text"
                  formControlName="lastName"
                  class="form-control border-0 bg-light"
                  placeholder="Dupont"
                />
              </div>
              <div *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched" class="mt-2 text-danger small">
                Le nom est requis
              </div>
            </div>

            <div class="col-12 col-md-6">
              <label for="firstName" class="form-label fw-500">Prénom <span class="text-danger">*</span></label>
              <div class="input-group">
                <span class="input-group-text border-0 bg-light">
                  <lucide-icon [img]="UserIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
                </span>
                <input
                  id="firstName"
                  type="text"
                  formControlName="firstName"
                  class="form-control border-0 bg-light"
                  placeholder="Jean"
                />
              </div>
              <div *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched" class="mt-2 text-danger small">
                Le prénom est requis
              </div>
            </div>
          </div>

          <div class="mb-4">
            <label for="email" class="form-label fw-500">Email <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="MailIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <input
                id="email"
                type="email"
                formControlName="email"
                class="form-control border-0 bg-light"
                placeholder="jean.dupont@email.com"
              />
            </div>
            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="mt-2 text-danger small">
              Veuillez entrer une adresse email valide
            </div>
          </div>

          <div class="mb-4">
            <label for="password" class="form-label fw-500">Mot de passe <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="LockIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                class="form-control border-0 bg-light"
                placeholder="••••••••"
              />
              <button
                type="button"
                (click)="togglePassword()"
                class="btn btn-light border-0"
              >
                <lucide-icon
                  [img]="showPassword ? EyeOffIcon : EyeIcon"
                  class="text-secondary"
                  style="width: 20px; height: 20px;"
                ></lucide-icon>
              </button>
            </div>
            <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="mt-2 text-danger small">
              Le mot de passe doit contenir au moins 6 caractères
            </div>
          </div>

          <div class="mb-4">
            <label for="confirmPassword" class="form-label fw-500">Confirmer le mot de passe <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="LockIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <input
                id="confirmPassword"
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                class="form-control border-0 bg-light"
                placeholder="••••••••"
              />
              <button
                type="button"
                (click)="toggleConfirmPassword()"
                class="btn btn-light border-0"
              >
                <lucide-icon
                  [img]="showConfirmPassword ? EyeOffIcon : EyeIcon"
                  class="text-secondary"
                  style="width: 20px; height: 20px;"
                ></lucide-icon>
              </button>
            </div>
            <div *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched" class="mt-2 text-danger small">
              <span *ngIf="registerForm.get('confirmPassword')?.hasError('required')">
                La confirmation du mot de passe est requise
              </span>
              <span *ngIf="registerForm.get('confirmPassword')?.hasError('passwordMismatch')">
                Les mots de passe ne correspondent pas
              </span>
            </div>
          </div>

          <div class="mb-4">
            <label for="studyLevel" class="form-label fw-500">Niveau d'étude <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="GraduationCapIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <select
                id="studyLevel"
                formControlName="studyLevel"
                class="form-select border-0 bg-light"
              >
                <option value="">Sélectionnez un niveau</option>
                <option value="Licence">Licence</option>
                <option value="Master">Master</option>
                <option value="Doctorat">Doctorat</option>
              </select>
            </div>
            <div *ngIf="registerForm.get('studyLevel')?.invalid && registerForm.get('studyLevel')?.touched" class="mt-2 text-danger small">
              Le niveau d'étude est requis
            </div>
          </div>

          <div class="mb-4">
            <label for="studyDomain" class="form-label fw-500">Domaine d'étude <span class="text-danger">*</span></label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="BookOpenIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <select
                id="studyDomain"
                formControlName="studyDomain"
                class="form-select border-0 bg-light"
              >
                <option value="">Sélectionnez un domaine</option>
                <option value="Informatique">Informatique</option>
                <option value="Droit">Droit</option>
                <option value="Médecine">Médecine</option>
                <option value="Économie">Économie</option>
                <option value="Ingénierie">Ingénierie</option>
                <option value="Sciences Humaines">Sciences Humaines</option>
              </select>
            </div>
            <div *ngIf="registerForm.get('studyDomain')?.invalid && registerForm.get('studyDomain')?.touched" class="mt-2 text-danger small">
              Le domaine d'étude est requis
            </div>
          </div>

          <div class="d-flex justify-content-end pt-3">
            <button
              type="button"
              (click)="nextStep()"
              [disabled]="!isStep1Valid()"
              class="btn btn-primary px-4"
            >
              Suivant
            </button>
          </div>
        </div>

        <div *ngIf="currentStep === 2">
          <div class="mb-4">
            <label for="phone" class="form-label fw-500">Numéro de téléphone</label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="PhoneIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <input
                id="phone"
                type="tel"
                formControlName="phone"
                class="form-control border-0 bg-light"
                placeholder="+33 6 12 34 56 78"
              />
            </div>
          </div>

          <div class="mb-4">
            <label for="targetCountries" class="form-label fw-500">Liste des pays destinés</label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="GlobeIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <input
                id="targetCountries"
                type="text"
                formControlName="targetCountries"
                class="form-control border-0 bg-light"
                placeholder="France, Canada, Allemagne (séparés par des virgules)"
              />
            </div>
          </div>

          <div class="mb-4">
            <label for="secondaryDomain" class="form-label fw-500">Domaine secondaire</label>
            <div class="input-group">
              <span class="input-group-text border-0 bg-light">
                <lucide-icon [img]="BookOpenIcon" class="text-secondary" style="width: 20px; height: 20px;"></lucide-icon>
              </span>
              <select
                id="secondaryDomain"
                formControlName="secondaryDomain"
                class="form-select border-0 bg-light"
              >
                <option value="">Sélectionnez un domaine secondaire</option>
                <option value="Informatique">Informatique</option>
                <option value="Droit">Droit</option>
                <option value="Médecine">Médecine</option>
                <option value="Économie">Économie</option>
                <option value="Ingénierie">Ingénierie</option>
                <option value="Sciences Humaines">Sciences Humaines</option>
              </select>
            </div>
          </div>

          <div class="mb-4">
            <div class="form-check mb-3">
              <input
                id="acceptTerms"
                type="checkbox"
                formControlName="acceptTerms"
                class="form-check-input"
              />
              <label for="acceptTerms" class="form-check-label small">
                J'accepte les conditions de confidentialité et les termes d'utilisation
              </label>
            </div>

            <div class="form-check">
              <input
                id="acceptNotifications"
                type="checkbox"
                formControlName="acceptNotifications"
                class="form-check-input"
              />
              <label for="acceptNotifications" class="form-check-label small">
                J'accepte de recevoir des notifications par email concernant mes activités
              </label>
            </div>
          </div>

          <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
            <p class="mb-0 small">{{ errorMessage }}</p>
          </div>

          <div class="d-flex gap-2 pt-3">
            <button
              type="button"
              (click)="skipAdditionalInfo()"
              class="btn btn-outline-secondary flex-grow-1"
            >
              Ignorer
            </button>
            <button
              type="submit"
              [disabled]="loading || !isStep2Valid()"
              class="btn btn-primary flex-grow-1"
            >
              {{ loading ? 'Inscription...' : "S'inscrire" }}
            </button>
          </div>
        </div>
      </form>

      <div class="text-center mt-4">
        <p class="text-secondary small mb-0">
          Vous avez déjà un compte ?
          <a routerLink="/login" class="link-primary text-decoration-none fw-500">
            Se connecter
          </a>
        </p>
      </div>
    </div>
  </div>
</div>
