<main class="flex-grow-1 bg-light min-vh-100">
    <div class="container py-5" style="max-width: 1200px;">

        <div class="mb-5">
            <h1 class="display-4 fw-bold text-dark mb-3 lh-1">Explore Upcoming Events</h1>
            <p class="fs-5 text-secondary fw-normal mb-0" style="max-width: 650px;">Connect, Learn, Grow: Discover
                academic opportunities, workshops, and conferences designed for your journey.</p>
        </div>

        <div
            class="search-bar-container mb-5 d-flex flex-column flex-lg-row align-items-stretch align-items-lg-center gap-3">
            <div class="flex-grow-1 position-relative">
                <span class="material-symbols-outlined search-icon">search</span>
                <input type="text" class="form-control form-control-custom rounded-3 py-2"
                    placeholder="Search for workshops, fairs, or conferences..." [(ngModel)]="searchTerm"
                    (input)="applyFilters()">
            </div>

            <div class="d-flex flex-wrap align-items-center gap-2">
                <div class="dropdown">
                    <button class="btn btn-filter rounded-3 py-2 px-3" type="button" data-bs-toggle="dropdown">
                        {{ selectedType || 'Event Type' }} <span
                            class="material-symbols-outlined fs-5 text-secondary">keyboard_arrow_down</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" role="button" (click)="setType('')">All Types</a></li>
                        <li><a class="dropdown-item" role="button" (click)="setType('Workshop')">Workshop</a></li>
                        <li><a class="dropdown-item" role="button" (click)="setType('Seminar')">Seminar</a></li>
                    </ul>
                </div>

                <div class="dropdown">
                    <button class="btn btn-filter rounded-3 py-2 px-3" type="button" data-bs-toggle="dropdown">
                        {{ selectedLocation || 'Location' }} <span
                            class="material-symbols-outlined fs-5 text-secondary">keyboard_arrow_down</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" role="button" (click)="setLocation('')">All Locations</a></li>
                        <li><a class="dropdown-item" role="button" (click)="setLocation('Online')">Online</a></li>
                        <li><a class="dropdown-item" role="button" (click)="setLocation('In Person')">In Person</a></li>
                    </ul>
                </div>

                <div class="dropdown">
                    <button class="btn btn-filter rounded-3 py-2 px-3" type="button" data-bs-toggle="dropdown">
                        Date <span class="material-symbols-outlined fs-5 text-secondary">keyboard_arrow_down</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">This Week</a></li>
                        <li><a class="dropdown-item" href="#">Next Month</a></li>
                    </ul>
                </div>

                <div class="vr mx-2 d-none d-sm-block text-secondary"></div>

                <button class="btn text-secondary fw-medium d-flex align-items-center gap-2 hover-primary"
                    (click)="setSort(selectedSort === 'Newest' ? 'Oldest' : 'Newest')">
                    <span class="small">Sort: {{ selectedSort }}</span>
                    <span class="material-symbols-outlined fs-5">sort</span>
                </button>
            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-5">

            <div *ngIf="filteredOpportunities.length === 0" class="col-12 text-center py-5">
                <p class="text-muted">No events found matching your filters.</p>
            </div>

            <div class="col" *ngFor="let item of filteredOpportunities">
                <div class="card h-100 overflow-hidden bg-white shadow-sm border-0">
                    <div
                        style="position: relative; overflow: hidden; border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem;">
                        <div class="card-img-holder" [style.background-image]="'url(' + item.imageUrl + ')'"></div>

                        <span class="badge-custom" [ngClass]="getBadgeClass(item.type)">
                            {{ item.type }}
                        </span>
                    </div>

                    <div class="card-body d-flex flex-column p-4">
                        <h5 class="card-title fw-bold text-dark mb-3">{{ item.title }}</h5>

                        <div class="d-flex flex-column gap-2 mb-3 text-secondary small">
                            <div class="d-flex align-items-center gap-2">
                                <span class="material-symbols-outlined fs-6 text-primary">event</span>
                                <span>{{ item.deadline }}</span>
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <span class="material-symbols-outlined fs-6 text-primary">
                                    {{ isOnline(item.location) ? 'videocam' : 'location_on' }}
                                </span>
                                <span>{{ item.location }}</span>
                            </div>
                        </div>

                        <p class="card-text text-secondary small mb-4"
                            style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            {{ item.description }}
                        </p>

                        <button [routerLink]="['/details', item.id]"
                            class="btn btn-light w-100 fw-semibold text-primary border"
                            style="background-color: #f8fafc;">
                            View Details
                        </button>
                    </div>
                </div>
            </div>

        </div>

        <div class="d-flex justify-content-center mb-4">
            <nav aria-label="Page navigation">
                <ul class="pagination align-items-center gap-2">
                    <li class="page-item disabled">
                        <a class="page-link border rounded-3 text-secondary d-flex align-items-center justify-content-center"
                            href="#" style="width: 40px; height: 40px;">
                            <span class="material-symbols-outlined">chevron_left</span>
                        </a>
                    </li>
                    <li class="page-item active">
                        <a class="page-link border-primary bg-primary text-white fw-bold rounded-3 d-flex align-items-center justify-content-center shadow"
                            href="#" style="width: 40px; height: 40px;">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link border bg-white text-dark fw-medium rounded-3 d-flex align-items-center justify-content-center hover-light"
                            href="#" style="width: 40px; height: 40px;">2</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link border bg-white text-dark fw-medium rounded-3 d-flex align-items-center justify-content-center hover-light"
                            href="#" style="width: 40px; height: 40px;">3</a>
                    </li>
                    <li class="page-item disabled"><span class="px-2 text-secondary">...</span></li>
                    <li class="page-item">
                        <a class="page-link border rounded-3 text-secondary d-flex align-items-center justify-content-center"
                            href="#" style="width: 40px; height: 40px;">
                            <span class="material-symbols-outlined">chevron_right</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

    </div>
</main>